# tibco-awsiot
This activity provides your flogo application the ability to update a device shadow on Aws.


## Installation

```bash
flogo add activity github.com/TIBCOSoftware/flogo-contrib/activity/awsiot
```

## Schema
Inputs and Outputs:

```json
{
  "inputs":[
    {
      "name": "thingName",
      "type": "string",
      "required": true
    },
    {
      "name": "awsEndpoint",
      "type": "string",
      "required": true
    },
    {
      "name": "desired",
      "type": "params"
    },
    {
      "name": "reported",
      "type": "params"
    }
  ]
}
```
## Settings
| Setting     | Description    |
|:------------|:---------------|
| thingName   | The name of the "thing" in Aws IoT |         
| awsEndpoint | The Aws Iot Endpoint for the account  |
| desired     | The desired state to update |
| reported    | The reported state to update |

## Configuration

### Certificate Installation
The activity looks for the Aws device certificates in a "things" directory relative to where the engine was started.  Download the [root CA certificate](https://www.symantec.com/content/en/us/enterprise/verisign/roots/VeriSign-Class%203-Public-Primary-Certification-Authority-G5.pem) file and save it as "things/root-CA.pem.crt". Now place the cert and private key generated by Aws IoT for your thing under "things/[thingName]" as device.pem.crt and device.pem.key respectively.  
### Flow Configuration
Configure a task in flow to update the device shadow of 'raspberry-pi' with a reported temp of "50".

```json
{
  "id": 3,
  "type": 1,
  "activityType": "tibco-awsiot",
  "name": "Update Device Shadow",
  "attributes": [
    {
      "name": "thingName",
      "type": "string",
      "value": "raspberry-pi"
    },
    {
      "name": "awsEndpoint",
      "type": "string",
      "value": "A3CWMRYOWXFD7I.iot.us-west-2.amazonaws.com"
    },
    {
      "name": "reported",
      "type": "params",
      "value": { "temp":"50" }
    }
  ]
}
```
